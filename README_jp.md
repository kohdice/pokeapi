# pokeapi

## 1.目次 
- [1. 目次](#1-目次)
- [2. このリポジトリについて](#2-このリポジトリについて)
- [3. 使用方法](#3-使用方法)
  - [3.1. Dockerのインストール](#31-Dockerのインストール)
  - [3.2. リポジトリのクローン](#32-リポジトリのクローン)
  - [3.3. .envの作成](#33-.envの作成)
  - [3.4. 動作確認](#34-動作確認)
- [4. 仕様](#4-仕様)
- [5. 開発環境のセットアップ](#5-開発環境のセットアップ)
  - [5.1. 必要なもの](#51-必要なもの)
  - [5.2. Poetryのインストール](#52-Poetryのインストール)
  - [5.3. 開発用仮想環境の作成](#53-開発用仮想環境の作成)
  - [5.4. スクリプト](#54-スクリプト)
- [6. Dev Containersを使用した開発環境のセットアップ](#6-Dev-Containersを使用した開発環境のセットアップ)
  - [6.1. 必要なもの](#61-必要なもの)
  - [6.2. 拡張機能のインストール](#62-拡張機能のインストール)
  - [6.3. Dev Containersのビルド](#63-Dev-Containersのビルド)
  - [6.4. スクリプト](#64-スクリプト)


## 2. このリポジトリについて
- このリポジトリは、ポケモンのデータを返すAPIのソースコードと開発環境のリポジトリです。
このAPIは[Elasticsearch](https://www.elastic.co/elasticsearch/)と[FastAPI](https://fastapi.tiangolo.com/)を使用して構築されています。

## 3. 使用方法

### 3.1. Dockerのインストール
1. [Docker公式サイト](https://www.docker.com/products/docker-desktop/)からDocker Desktopをダウンロードしてインストールしてください。
### 3.2. リポジトリのクローン
1. 開発マシンに[このリポジトリ](https://github.com/kohdice/pokeapi)をcloneし、ローカルリポジトリを作成してください。
### 3.3. .envの作成
1. ローカルリポジトリの`docker`ディレクトリにある`.env.tmp`ファイルを同じディレクトリにコピーしてください。
2. コピーしたファイルの名前を`.env`に変更してください。
3. プロジェクト名を変更したい場合は、`.env`ファイルの`COMPOSE_PROJECT_NAME`の値を変更してください。
- `.env`ファイルはgitで追跡されないようになっており、これは意図した挙動です。
### 3.4. 動作確認
1. `docker`ディレクトリに移動してください。
```bash
cd docker
```
2. コンテナをビルドしてください。
```bash
docker-compose up -d --build
```
3. [localhost:8000](http://localhost:8000/)にアクセスしてください。
次のメッセージが表示されたら動作確認は完了です。
```bash
{"message":"Welcome to Pokédex!"}
```

## 4. 仕様
- APIの詳細な仕様については、[このページ](https://kohdice.github.io/pokeapi/)を参照してください。
- 検索可能なポケモン（テストデータとして挿入されたデータ）は以下の通りです。[^1]
  - フシギダネ
  - フシギソウ
  - フシギバナ
  - メガフシギバナ
  - ヒトカゲ
  - リザード
  - リザードン
  - メガリザードンＸ
  - メガリザードンＹ
  - ゼニガメ
  - カメール
  - カメックス
  - メガカメックス
  - ピカチュウ
  - ライチュウ
  - ライチュウ（アローラのすがた）
  - ミュウツー
  - メガミュウツーＸ
  - メガミュウツーＹ
  - ミュウ
  - オタチ
  - オオタチ
  - カイオーガ
  - ゲンシカイオーガ
  - グラードン
  - ゲンシグラードン
  - ミミッキュ（ばけたすがた）
  - ミミッキュ（ばれたすがた）

## 5. 開発環境のセットアップ

### 5.1. 必要なもの
- Python 3.10+
- ステップ[3. 使用方法](#3-使用方法)の手順に従ってコンテナがビルドされていること。
- Neovimの使用を推奨します。（VSCodeを使用している場合は、ステップ[6.](#6-Dev-Containersを使用した開発環境のセットアップ)に進んでください）
### 5.2. Poetryのインストール
- [公式ドキュメント](https://python-poetry.org/docs/)を参照してPoetryをインストールしてください。
### 5.3. 開発用仮想環境の作成
1. 仮想環境を作成するためのコマンドを実行してください。
```bash
poetry install
```
2. 仮想環境をアクティブにしてください。
```bash
poetry shell
```
### 5.4. スクリプト
- テストの実行
```bash
task test
```
- フォーマッタの実行
```bash
task fmt
```
- リンターの実行
```bash
tash lint
```

## 6. Dev Containersを使用した開発環境のセットアップ

### 6.1. 必要なもの
- [使用方法](#3-使用方法)セクションのステップ[3.1.](#31-Dockerのインストール)から[3.3.](#33-.envの作成)までを完了していること。
- VSCodeがインストールされていること。


### 6.2. 拡張機能のインストール
VSCodeに[Dev Containers](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers)をインストールしてください。
### 6.3. Dev Containersのビルド
1. VSCodeの左下にある`><`のようなアイコンをクリックし、`Reopen in Container`を選択してください。
2. ターミナルに次のメッセージが表示されたら、任意のキーを押してください。
```bash
Done. Press any key to close the terminal.
```
3. [localhost:8000](http://localhost:8000/)にアクセスしてください。
次のメッセージが表示されたら動作確認は完了です。
```bash
{"message":"Welcome to Pokédex!"}
```
### 6.4. スクリプト
- テストの実行
```bash
poetry run task test
```
- フォーマッタの実行
```bash
poetry run task fmt
```
- リンターの実行
```bash
poetry run tash lint
```


[^1]: 日本語での検索のみサポートされています。
